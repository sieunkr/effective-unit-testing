# Chapter 3 - 테스트 더블

## 3.1 테스트 더블

- 테스트 대상 코드를 격리한다.
- 테스트 속도를 개선한다.
- 예측 불가능한 실행 요소를 제거한다.
- 특수한 상황을 시뮬레이션한다.
- 감춰진 정보를 얻어낸다.

### 3.1.1 ~ 3.1.5 

생략, 따로 읽어볼 것

## 3.2 테스트 더블의 종류

- 테스트 스텁
- 가짜 객체
- 테스트 스파이
- 목 객체

### 3.2.1 테스트 스텁

````java
public class LoggerStub implements Logger {

    public void log(LogLevel level, String message) {}
}
````
스텁의 전형적인 모습이다. 로그와 관련 없는 기능을 검사할 때는 로그가 있는지조차 알 필요가 없으니...(?)

텅빈 void 메서드만으로 부족할 때가 있다면? 최소한의 행동은 취해주거나 입력값에 따라 다르게 행동할 필요가 있다면 가짜 객체를 만들어야 한다.

### 3.2.2 가짜 객체

가짜 객체는 진짜 객체의 행동을 흉내내지만, 진짜 객체를 사용할 때 생기는 부수 효과나 연쇄 동작이 일어나지 않도록 경력화, 최소화 한 것이다. 

테스트 더블을 사용하지 않는다면 저장소를 이용하는 코드를 검사하려는 모든 테스트는 어딘가에 있을 진짜 데이터베이스를 찾으려 한다. 

````java
public class FakeUserRepository implements UserRepository {

    public void save(User user) {
        ...
    }
    ...
}
````

### 3.2.3 테스트 스파이

### 3.2.4 Mock

번역이 이상한건지..내가 이해를 잘 못하는건지, 책이 눈에 잘 안들어옴...어쩃든 중요한 내용이니깐 나중에 다시 읽어볼 것

## 3.3 테스트 더블 활용 지침

### 3.3.1 용도에 맞는 테스트 더블 활용

> 스텁은 질문하고 Mock은 행동한다..(?)

- 두 객체 간 상호작용의 결과로 특정 메서드가 호출되었는지 확인하고 싶다면 Mock 객체를 사용한다.
- Mock 객체를 사용하기로 했는데, 테스트 코드가 생각만큼 깔끔하게 정리되지 않는다면 더 단순한 테스트 스파이를 손수 작성할 수 있는지 생각한다.
- 협력 객체는 자리만 지키면 되고 협력 객체가 대상 객체에 넘겨줄 응답도 테스트에서 통제할 수 있다면 스텁이 정답이다. 
- 필요한 서비스나 컴포넌트를 미처 준비하지 못해 스텁을 사용하는데, 시나리오가 너무 복잡해서 테스트 코드가 관리하기 어려울 만큼 복잡해졌다면 가짜 객체를 구현한다.

### 3.3.2 AAA (arrange-act-assert)

Given, When, Then 과 유사하다.

- Given : 주어진 상황에서
- When : 어떤 일이 발생하면
- Then : 특정 결과를 기대한다.

### 3.3.3 구현이 아니라 동작을 확인

테스트는 오직 한가지만 검사해야 하고 그 의도를 명확히 전달해야 한다. Mock 에는 정말 바라고 의도한 핵심 동작만 설정하면 된다. 구현이 아니라 동작을 검증하자.


나머지 생략.. 중요한 내용이지만 책이 눈에 잘 안들어옴
